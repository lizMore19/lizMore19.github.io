---
import { getCollection } from 'astro:content';
import '../../styles/global.css';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post }
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<!DOCTYPE html>
<html lang="es" class="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{post.data.title} | Blog</title>
    <meta name="description" content={post.data.description}>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Fuentes e iconos -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="bg-gradient-to-br from-pink-50 via-white to-purple-50 min-h-screen w-full">
    
    <!-- Botón volver  -->
    <div class="fixed top-6 left-6 z-50">
      <a 
        href="/#blog"
        class="flex items-center gap-2 bg-white text-gray-900 px-6 py-3 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 border-2 border-pink-200 hover:border-pink-400 hover:scale-105"
      >
        <span class="text-xl">←</span>
        <span class="font-semibold">Volver</span>
      </a>
    </div>

    <main class="pt-24 pb-16">
      <article class="max-w-6xl mx-auto py-8 px-4">
        <!-- Header: Fecha, Título, Descripción y Tags centrados -->
        <header class="mb-10 text-center">
          <time class="text-pink-600 font-semibold text-sm uppercase tracking-wide block mb-4">
            {new Date(post.data.date).toLocaleDateString('es-MX', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </time>
          
          <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4 leading-tight">
            {post.data.title}
          </h1>
          
          <p class="text-xl text-gray-600 mb-6 max-w-3xl mx-auto">
            {post.data.description}
          </p>
          
          <!-- Tags -->
          <div class="flex flex-wrap gap-2 justify-center mb-8">
            {post.data.tags && post.data.tags.map((tag: string) => (
              <span class="px-4 py-2 bg-pink-100 text-pink-700 text-sm rounded-full font-medium">
                {tag}
              </span>
            ))}
          </div>
        </header>

        <!-- Layout de dos columnas: Imagen y Contenido -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
          
          <!-- Columna izquierda: Imagen -->
          {post.data.image && (
            <div class="rounded-2xl overflow-hidden shadow-xl border-4 border-white">
              <img 
                src={post.data.image} 
                alt={post.data.title}
                class="w-full h-auto object-cover"
              />
            </div>
          )}

          <!-- Columna derecha: Contenido del post -->
          <div class="prose prose-lg max-w-none bg-white rounded-2xl shadow-lg p-8">
            <Content />
          </div>

        </div>
      </article>

      <!-- Posts relacionados -->
      <section class="bg-gradient-to-br from-pink-50 to-purple-50 py-12 mt-16 rounded-2xl max-w-6xl mx-auto">
        <div class="px-6">
          
          <div class="text-center">
            <a 
              href="/#blog"
              class="inline-block bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-full hover:from-pink-600 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105"
            >
              ← Volver al Blog
            </a>
          </div>
        </div>
      </section>
    </main>
  </div>
</body>
</html>

<style>
  /* Estilos para el contenido markdown */
  .prose {
    color: #374151;
    line-height: 1.75;
  }

  .prose h1 {
    font-size: 2.25rem;
    font-weight: 800;
    color: #1f2937;
    margin-top: 2rem;
    margin-bottom: 1rem;
    line-height: 1.2;
  }

  .prose h2 {
    font-size: 1.875rem;
    font-weight: 700;
    color: #1f2937;
    margin-top: 2rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #fce7f3;
  }

  .prose h3 {
    font-size: 1.5rem;
    font-weight: 600;
    color: #374151;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .prose p {
    margin-bottom: 1.25rem;
    font-size: 1.125rem;
  }

  .prose a {
    color: #ec4899;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
  }

  .prose a:hover {
    color: #db2777;
    text-decoration: underline;
  }

  .prose ul, .prose ol {
    margin-bottom: 1.25rem;
    padding-left: 1.5rem;
  }

  .prose li {
    margin-bottom: 0.5rem;
  }

  .prose blockquote {
    border-left: 4px solid #ec4899;
    padding-left: 1rem;
    font-style: italic;
    color: #6b7280;
    background-color: #fce7f3;
    padding: 1rem;
    border-radius: 0.5rem;
    margin: 1.5rem 0;
  }

  .prose code {
    background-color: #f3f4f6;
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
    color: #ec4899;
    font-weight: 600;
  }

  .prose pre {
    background-color: #1f2937;
    color: #f9fafb;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
  }

  .prose pre code {
    background-color: transparent;
    color: inherit;
    padding: 0;
  }

  .prose img {
    border-radius: 0.75rem;
    margin: 2rem auto;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  }

  .prose strong {
    font-weight: 700;
    color: #1f2937;
  }

  .prose em {
    font-style: italic;
    color: #4b5563;
  }

  .prose hr {
    border-color: #fce7f3;
    margin: 2rem 0;
  }
</style>